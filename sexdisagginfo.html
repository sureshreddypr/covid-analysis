<!DOCTYPE html>
<html lang="en">
   <head>
      <title>COVID-19 - GLOBAL IMPACT SUMMARY</title>
      <meta charset="utf-8" />
      <script src="https://d3js.org/d3.v4.min.js"></script>
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0"
         />
      <style>
         body {
         margin: 0;
         font: 11px Trebuchet MS;
         background-color: #grey;
         background-image: url('data/covid-19.png');
         background-repeat: no-repeat;
         background-attachment: fixed;
         background-size: 100% 100%
		 ;
         }
         .header h1 {
         height: 10px;
         top: 18px;
         left: 10px;
         }
         /* Style the header */
         .header h1 {
         text-align: center;
         height: 10px;
         top: 18px;
         left: 10px;
         color: white;
         padding-bottom: 5px;
         }
         /* Style the top navigation bar */
         .topnav {
         overflow: hidden;
         background-color: #803432;
         }
         /* Style the topnav links */
         .topnav a {
         float: left;
         display: block;
         color: antiquewhite;
         text-align: center;
         padding: 5px 12px;
         text-decoration: none;
         text-align: center;
         font-size: medium;
         }
         /* Change color on hover */
         .topnav a:hover {
         background-color: lightblue;
         color: darkred;
         text-align: center;
         }
         .tooltip {
         position: absolute;
         display: inline;
         overflow: auto;
         font-size: 14px;
         width: auto;
         height: auto;
         pointer-events: none;
         background-color: antiquewhite;
         color: midnightblue;
         padding: 0.3px;
         }
         /* Style the footer */
         .footer {
         background-color: lightblue;
         padding: 10px;
         text-align: center;
         }
         .container {
         position: center;
         margin: 1px;
         width: 100%;
         }
         .bar1 {
         fill: #008B8B;
         }
         .bar2 {
         fill: #FB7E81;
         }
         .bar3 {
         fill: #9E0508;
         }
         .bar:hover {
         fill: orange;
         }
         /* bar toolTip */
         .barToolTip {
         position      : absolute;
         text-align    : center;
         max-width     : 70px;
         max-height    : 30px;
         padding       : 8px;
         border        : none;
         border-radius : 8px;
         margin-top    : -30px;
         font          : 10px sans-serif;
         background    : black;
         color         : white;
         pointer-events: none;
         }
         
         .radio{
	         text-align: center;
         }
         .row{
	         text-align: center;
         }
         
      </style>
   </head>
   <body>
      <div class="header">
         <h1
            style="
            text-align: center;
            color: antiquewhite;
            font-family: Trebuchet MS;
            font-size: 250%;
            "
            >
            COVID-19 GLOBAL IMPACT SUMMARY
         </h1>
      </div>
      <div class="body">
         <div class="container">
            <div class="topnav" >
               <a href="index.html"><b>COVID-19 TESTS SUMMARY</b></a>
               <a href="casesvsdeaths.html"><b>CASES AND DEATHS</b></a>
               <a href="sexdisagginfo.html"><b>SEX DISAGGREGATED INFO</b></a>
            </div>
         </div>
         <p
            style="
            font-family: Trebuchet MS;
            font-size: 130%;
            "
            align="justify"
            >
            <b style="color: #803432; font-size: 18px;"
               >  COVID-19 Overview</b
               ><br />
         <p style="color:antiquewhite; font-size: 16px"> Coronavirus disease 2019 (COVID-19) is an infectious disease caused by severe acute respiratory syndrome coronavirus 2 (SARS-CoV-2). It was first identified in December 2019 in Wuhan, Hubei, China, and has resulted in an ongoing pandemic. The first confirmed case has been traced back to 17 November 2019 in Hubei. As of 1 August 2020, more than 17.5 million cases have been reported across 188 countries and territories, resulting in more than 679,000 deaths. More than 10.3 million people have recovered. <a href="https://en.wikipedia.org/wiki/Coronavirus_disease_2019">[R]</a>    
         </p>
         <p
            style="
            font-family: Trebuchet MS;
            font-size: 130%;
            "
            align="justify"
            >
            <b style="color: #803432; font-size: 16px;"
               >Why COVID-19 testing is so important?</b
               ><br />
         <p style="color:antiquewhite; font-size: 16px"> The COVID-19 testing is important to prevent the spread of the virus in the community. Less than three percent of the world population has been tested to date. The testing has mainly been on demand testing (PCR). Two kinds of tests are used to determine COVID-19 infection.<br/>
             1. The PCR test (polymerase chain reaction test), can be done with a throat swab and determines if you have the infection now. This test is used for those concerned if they have the virus because of symptoms. <br/>
             2. The Antibody test has growing interest as it can determine if you have been infected with the virus and fought off the disease. Both tests have many false positives, and recent exposure, particularly with the antibody test, may not trigger a positive for one to three weeks. <br/>
            The antibody test is a better test to determine the infectivity rate in the community. Most people seeking a test do so because they have symptoms (PCR) but is not helpful in determining how many in the community have been exposed. <a href="https://www.tampabay.com/opinion/2020/05/11/why-covid-19-testing-is-important-column/">[R]</a> <br/>
         </p>
         <p
            style="
            font-family: Trebuchet MS;
            font-size: 130%;
            "
            align="justify"
            >
            <b style="color: #803432; font-size: 18px;"
               >  COVID-19 TESTS TREND</b
               ><br />
         <p style="color:antiquewhite; font-size: 16px"> The below bar chart shows the testing trend of the countries which are conducting the tests to the people to identy and take appropriate measures to prevent the spread of the virus. </p>

         </p>
         </p>
         <br/>
   <div class='row'>
	<h2> User Interactive</h2>
				<p>total time watched: 1411 minutes</p>
					<div class='radio'>
						<label class='radio-inline'>
							<input type="radio" name="gender" value="male" onclick='change(this.value)'> male
						</label>
						<label class='radio-inline'>
							<input type="radio" name="gender" value="female" onclick='change(this.value)'> female
						</label>
						<label class='radio-inline'>
							<input type="radio" name="gender" value="both" onclick='change(this.value)' checked > both
						</label>
					</div>
			<svg class='chart'>
			</svg>
	</div>
         <div
            id="narrative_viz"
            style="
            background-color: #CACBD4;
            color: rgba(236, 241, 175, 0.09);
            padding: 10px;
            border: 3px outset  #803432;
            "
            ></div>
         <br />
         <footer>
            <p
               style="
               background-color: #803432;
               color: antiquewhite;
               font-family: Trebuchet MS;
               font-size: 160%;
               "
               align="justify"
               >
               <b>References</b>
            </p>
            <p style="color:antiquewhite; font-size: 14px"> 
               <b>Dataset References : </b>
               <a href= "https://ourworldindata.org/coronavirus-source-data"> https://ourworldindata.org/coronavirus-source-data </a>  ,                 
               <a href="https://globalhealth5050.org/covid19/sex-disaggregated-data-tracker/#1593530684002-e87481be-8709"> 
               https://globalhealth5050.org/covid19/sex-disaggregated-data-tracker</a>
               <br />
               <b>Background Image   : </b>
               <a href="https://www.labmanager.com/multimedia/covid-19-resource-guide-22131">
               www.labmanager.com/multimedia/covid-19-resource-guide-22131</a>          
               <br />
               <b>Author             : </b> Suresh Reddy Ponnam Reddy<br />
               <br />
               For more info on COVID-19, please visit <a href="https://www.cdc.gov/coronavirus/2019-ncov/index.html">www.cdc.gov/coronavirus</a>. Please follow the CDC guidelines and stay safe!
            </p>
         </footer>
      </div>
      <script type="text/javascript">
         
         ////////////////////////start -  total tests bar chart //////////////////////
	      
	d3.csv('data/sex-disaggregated_covid_data_07252020.csv', function (
           data_fatalrate
         )
         
       	var maleData = [];
	var femaleData = [];

	for(var i = 0; i < data_fatalrate.length; i++){
		maleData.push(data_fatalrate[i]["deaths_male_percent"]);
		femaleData.push(data_fatalrate[i]["deaths_feamle_percent"]);
	}
}

//functions for toggling between data
function change(value){

	if(value === 'male'){
		gender = 'male'
		update(maleData, gender);
	}else if(value === 'female'){
		gender = 'female'
		update(femaleData, gender);
	}else{
		update(bothData);
	}
}

function update(data, gender ){
	//set domain for the x axis
	xChart.domain(data.map(function(d){ return d.Country; }) );
	//set domain for y axis
	yChart.domain( [0, d3.max(data, function(d){ return +d.deaths_male_percent; })] );
	
	//get the width of each bar 
	var barWidth = width / data.length;
	
	//select all bars on the graph, take them out, and exit the previous data set. 
	//then you can add/enter the new data set
	var bars = chart.selectAll(".bar")
					.remove()
					.exit()
					.data(data)		
	//now actually give each rectangle the corresponding data
	bars.enter()
		.append("rect")
		.attr("class", "bar")
		.attr("x", function(d, i){ return i * barWidth + 1 })
		.attr("y", function(d){ return yChart( d.deaths_male_percent); })
		.attr("height", function(d){ return height - yChart(d.deaths_male_percent); })
		.attr("width", barWidth - 1)
		.attr("fill", function(d){ 
			if(gender=='female'){
				return "rgb(251,180,174)";
			}else{
				return "rgb(179,205,227)";
			}
		});
	//left axis
	chart.select('.y')
		  .call(yAxis)
	//bottom axis
	chart.select('.xAxis')
		.attr("transform", "translate(0," + height + ")")
		.call(xAxis)
		.selectAll("text")
			.style("text-anchor", "end")
			.attr("dx", "-.8em")
			.attr("dy", ".15em")
			.attr("transform", function(d){
				return "rotate(-65)";
			});
			
}//end update

//set up chart
var margin = {top: 20, right: 20, bottom: 95, left: 50};
var width = 800;
var height = 500;

var chart = d3.select(".chart")
				.attr("width", width + margin.left + margin.right)
				.attr("height", height + margin.top + margin.bottom)
				.append("g")
				.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var xChart = d3.scaleBand()
				.range([0, width]);
				
var yChart = d3.scaleLinear()
				.range([height, 0]);

var xAxis = d3.axisBottom(xChart);
var yAxis = d3.axisLeft(yChart);

//set up axes
//left axis
	chart.append("g")
		  .attr("class", "y axis")
		  .call(yAxis)
		  
	//bottom axis
	chart.append("g")
		.attr("class", "xAxis")
		.attr("transform", "translate(0," + height + ")")
		.call(xAxis)
		.selectAll("text")
			.style("text-anchor", "end")
			.attr("dx", "-.8em")
			.attr("dy", ".15em")
			.attr("transform", function(d){
				return "rotate(-65)";
			});

//add labels
chart
	.append("text")
	.attr("transform", "translate(-35," +  (height+margin.bottom)/2 + ") rotate(-90)")
	.text("% of deaths");
		
chart
	.append("text")
	.attr("transform", "translate(" + (width/2) + "," + (height + margin.bottom - 5) + ")")
	.text("country Name");

//use bothData to begin with
update(bothData);
     /*   
           // function call backs for mouseover and mouseout
            
            function onMouseOver(d){

               var tooltipDiv = d3.select("barToolTip"); 
                        tooltipDiv.transition()        
                         .duration(200)      
                         .style("opacity", 1);    

                        tooltipDiv.html( "your Content")
                         .style("left", (parseFloat(widthScale(d.total_tests))) + "px") 
                         .style("cursor", "pointer")
                         .style("top", function(d){
                     return d3.event.pageY - this.offsetHeight - 17  + "px"
                  })
               .style("color", "#333333");        
            }

            function onMouseOut(d){
                var tooltipDiv = d3.select("barToolTip"); 
                        tooltipDiv.transition()        
                                  .duration(500)      
                                  .style("opacity", 0);  
            }
            
            
           // add legend
         
           svg2
             .append('circle')
             .attr('cx', 1000)
             .attr('cy', 60)
             .attr('r', 6)
             .style('fill', '#008B8B');
           svg2
             .append('circle')
             .attr('cx', 1000)
             .attr('cy', 90)
             .attr('r', 6)
             .style('fill', '#FB7E81');
           svg2
             .append('circle')
             .attr('cx', 1000)
             .attr('cy', 120)
             .attr('r', 6)
             .style('fill', '#9E0508');
           svg2
             .append('text')
             .attr('x', 1020)
             .attr('y', 60)
             .text('Total Tests > 1M')
             .style('font-size', '15px')
             .attr('alignment-baseline', 'middle');
           svg2
             .append('text')
             .attr('x', 1020)
             .attr('y', 90)
             .text('Total Tests > 500K & < 1M')
             .style('font-size', '15px')
             .attr('alignment-baseline', 'middle');
           svg2
             .append('text')
             .attr('x', 1020)
             .attr('y', 120)
             .text('Total Tests < 500K')
             .style('font-size', '15px')
             .attr('alignment-baseline', 'middle');
         });
         
         ////////////////////////////// End - Total Cases - bar chart ///////////////////////////////////////////////  */
      </script>
   </body>
</html>
